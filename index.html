<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/7757/7757731.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry Practicals Hub</title>
    
    <style>
        /* Main body settings */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #1a1a1a;
            overflow-x: hidden;
            margin: 0; 
            padding: 0;
            line-height: 1.6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* NAVIGATION BAR STUFF */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 16px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
        }

        /* dark mode for nav */
        .dark-mode {
            color: white !important;
        }
        
        .dark-mode .logo { color: white; }

        /* Search bar styles */
        .search-nav {
            position: relative;
            flex: 1;
            max-width: 220px;
        }

        .search-nav input {
            width: 100%;
            padding: 10px;
            padding-left: 38px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
            outline: none;
        }

        .logo {
            font-weight: bold;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Hero section */
        .hero {
            min-height: 90vh;
            background-color: #1a1a1a;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 140px 40px 80px;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(rgba(26, 26, 26, 0.7), rgba(26, 26, 26, 0.7)),
            url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M 100 0 L 0 0 0 100" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            background-size: cover, 50px 50px;
        }

        .hero::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(255, 100, 50, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            animation: pulse-glow 8s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
        }

        h1 {
            font-size: 4.2rem;
            color: #fff;
            margin-bottom: 24px;
            font-weight: 700;
            line-height: 1.1;
        }

        .accent {
            color: #ff6432;
            position: relative;
            display: inline-block;
        }
        
        .accent::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 120%; height: 120%;
            background: radial-gradient(circle, rgba(255, 100, 50, 0.4) 0%, transparent 70%);
            filter: blur(20px);
            z-index: -1;
            animation: mist 3s ease-in-out infinite;
        }

        @keyframes mist {
            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        }

        /* Buttons */
        .cta-button {
            padding: 14px 28px;
            background: #ff6432;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            display: inline-block;
            transition: all 0.2s ease;
        }
        
        .cta-button:hover {
            background: #ff7a4d;
            transform: translateY(-1px);
        }

        .cta-button.secondary {
            background: transparent;
            border: 1.5px solid rgba(255, 255, 255, 0.3);
        }

        .cta-button.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Experiment Grid Layout */
        .experiments-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        /* The card box */
        .experiment-card {
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 12px;
            overflow: hidden;
            transition: 0.3s; /* smooth movement */
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block; 
            opacity: 0; 
            transform: translateY(30px);
        }

        /* HOVER EFFECT */
        .experiment-card:hover {
            transform: translateY(-10px) !important;
            box-shadow: 0 15px 40px rgba(0,0,0,0.12);
            border-color: #ff6432;
        }

        .experiment-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .experiment-card.hidden {
            display: none;
        }

        .experiment-img {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #f5f5f5, #fafafa);
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #e8e8e8;
            overflow: hidden;
            color: #ccc;
            font-size: 0.9rem;
        }

        .experiment-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @media (max-width: 968px) {
            h1 { font-size: 2.8rem; }
            .experiments-grid { grid-template-columns: 1fr 1fr; } 
            .info-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 640px) {
            .experiments-grid { grid-template-columns: 1fr; } 
            nav { flex-wrap: wrap; }
            .search-nav { order: 3; width: 100%; max-width: 100%; margin-top: 10px; }
        }

        .nav-button {
            padding: 10px 24px;
            background: #1a1a1a;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .nav-button.secondary {
            background: transparent;
            color: #1a1a1a;
            border: 1.5px solid rgba(0,0,0,0.15);
        }

        .dark-mode .nav-button.secondary {
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .dark-mode .nav-button.secondary:hover {
            background: rgba(255,255,255,0.1);
        }

        .dark-mode .search-nav input {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255,255,255,0.2);
        }
        
        .dark-mode .search-nav-icon { color: rgba(255,255,255,0.7); }

        .search-nav-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 50px;
            max-width: 1280px;
            margin: 0 auto;
        }
        
        .info-item {
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: 0.6s;
        }
        
        .info-item.visible { opacity: 1; transform: translateY(0); }

        .hero-content {
            z-index: 2;
            text-align: center;
            max-width: 780px;
        }

        .label {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            display: inline-block;
            margin-bottom: 24px;
        }

        .tagline {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 40px;
        }

        .cta-group {
            display: flex;
            gap: 16px;
            justify-content: center;
        }

        .section {
            padding: 60px 40px;
            max-width: 1280px;
            margin: 0 auto;
        }

        /* Alternating backgrounds for sections */
        .section-alt {
            background: #fcfcfc;
            border-top: 1px solid #f0f0f0;
            border-bottom: 1px solid #f0f0f0;
            width: 100%;
        }

        .section-header { margin-bottom: 40px; text-align: center; }
        .section-title { font-size: 2.2rem; color: #1a1a1a; margin-bottom: 12px; }
        .section-subtitle { color: #666; font-size: 1.05rem; }

        .experiment-content { padding: 24px; }
        .experiment-badge { 
            background: #f5f5f5; 
            color: #666; 
            padding: 4px 10px; 
            border-radius: 6px; 
            font-size: 0.75rem; 
            display: inline-block;
            margin-bottom: 12px;
            font-weight: 600;
        }
        .experiment-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; line-height: 1.4; }
        .experiment-description { color: #666; font-size: 0.9rem; }
        
        .cta-section {
            background: #1a1a1a;
            color: white;
            padding: 100px 40px;
            text-align: center;
        }

        #searchResults { text-align: center; color: #666; margin-top: 20px; margin-bottom: 20px; font-size: 1.2rem;}

        /* --- FIXED EMAIL BUBBLE STYLES --- */
        .email-wrapper {
            position: relative;
            display: inline-block;
            white-space: nowrap; /* Ensures "email address" stays on one line */
        }

        .email-bubble {
            display: none; /* Hidden by default */
            position: absolute;
            top: 100%; /* Start exactly at bottom of text */
            margin-top: 10px; /* Push down slightly for gap */
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            white-space: nowrap;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            line-height: normal; /* Reset line height so text inside bubble looks normal */
        }

        /* Triangle pointer for bubble */
        .email-bubble::after {
            content: "";
            position: absolute;
            bottom: 100%; /* Place at top of bubble */
            left: 50%;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: transparent transparent #333 transparent;
        }
    </style>
</head>
<body>

    <nav id="navbar">
        <div class="nav-left" style="flex: 1; display: flex; align-items: center; gap: 24px;">
            <div class="search-nav">
                <span class="search-nav-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="Search experiments...">
            </div>
        </div>
        
        <div class="nav-center" style="flex: 0 0 auto; text-align: center;">
            <div class="logo">Chemistry Expermient Portfolio</div>
        </div>

        <div class="nav-right" style="flex: 1; display: flex; justify-content: flex-end;">
            <a href="#home" class="nav-button secondary">Experiments</a>
        </div>
    </nav>

    <div class="hero">
        <div class="hero-content">
            <span class="label">Free Educational Resource</span>
            <h1>Learn chemistry through <span class="accent">real experiments</span></h1>
            <p class="tagline">Hands-on lab demonstrations from Simple "At Home" experiments all the way to A level and beyond. Perfect for students and anyone with a curiousity to chemistry.</p>
        </div>
    </div>

    <div class="info-banner" id="about" style="background: #fff; padding: 60px 40px; border-bottom: 1px solid #e8e8e8;">
        
        <div style="max-width: 800px; margin: 0 auto 40px; text-align: center;">
            <h2 style="font-size: 2rem; font-weight: 700; color: #1a1a1a; margin-bottom: 20px;">About This Project</h2>
            <p style="font-size: 1.05rem; color: #444; line-height: 1.8;">
                Hey, I'm Marco and I like to make science experiments. I've documented experiments ranging from At Home Experiments all the way to A level experiments and everything in between. Im very excited to show my documentation, execution and preperation for all my experiments, and hope they could be of use to other interesed chemistry students! If there are any errors in how ive gone about doing my experiments, please feel free to reach out to me via my 
                
                <span class="email-wrapper">
                    <a href="mailto:x@gmail.com" id="emailLink" style="color: #ff6432; text-decoration: underline; cursor: pointer;">email address</a>
                    <span id="emailBubble" class="email-bubble">x@gmail.com</span>
                </span>
                
                , so i can correct any mistakes i might make.
            </p>
        </div>
<br>
        <div style="width: 100%; height: 1px; background: linear-gradient(to right, transparent, #e8e8e8 20%, #e8e8e8 80%, transparent); margin: 0 auto 50px;"></div>
<br>
        <div class="info-grid" style="margin-bottom: 40px;">
            <div class="info-item fade-in">
                <div style="font-size: 3rem; margin-bottom: 10px;">üìπ</div>
                <h3 style="font-size: 1.5rem; font-weight: 700; color: #1a1a1a; margin-bottom: 5px;">50+ Videos</h3>
                <p style="color: #666;">In-depth demonstrations</p>
            </div>
            
            <div class="info-item fade-in">
                <div style="font-size: 3rem; margin-bottom: 10px;">‚è±Ô∏è</div>
                <h3 style="font-size: 1.5rem; font-weight: 700; color: #1a1a1a; margin-bottom: 5px;">8+ Hours</h3>
                <p style="color: #666;">Of detailed footage</p>
            </div>
            
            <div class="info-item fade-in">
                <div style="font-size: 3rem; margin-bottom: 10px;">üí∏</div>
                <h3 style="font-size: 1.5rem; font-weight: 700; color: #1a1a1a; margin-bottom: 5px;">100% Free</h3>
                <p style="color: #666;">Open educational resource</p>
            </div>
        </div>

        <div style="width: 100%; height: 1px; background: linear-gradient(to right, transparent, #e8e8e8 20%, #e8e8e8 80%, transparent); margin: 0 auto 80px;"></div>
    </div>
    
    <div id="searchResults"></div>

    <section class="section" id="home">
        <div class="section-header">
            <h2 class="section-title">üè† AT-HOME EXPERIMENTS</h2>
            <p class="section-subtitle">Safe science you can do in your kitchen</p>
        </div>
        <div class="experiments-grid" id="grid-home"></div>
    </section>

    <div class="section-alt">
        <section class="section" id="beyond">
            <div class="section-header">
                <h2 class="section-title">üöÄ "BEYOND THE SPEC"</h2>
                <p class="section-subtitle">Explosive, colorful, and advanced demonstrations</p>
            </div>
            <div class="experiments-grid" id="grid-beyond"></div>
        </section>
    </div>

    <section class="section" id="gcse">
        <div class="section-header">
            <h2 class="section-title">‚úÖ GCSE PRACTICALS</h2>
            <p class="section-subtitle">Foundational concepts and core practicals</p>
        </div>
        <div class="experiments-grid" id="grid-gcse"></div>
    </section>

    <div class="section-alt">
        <section class="section" id="alevel">
            <div class="section-header">
                <h2 class="section-title">üéì A-LEVEL PRACTICALS</h2>
                <p class="section-subtitle">Advanced titration, kinetics, and organic synthesis</p>
            </div>
            <div class="experiments-grid" id="grid-alevel"></div>
        </section>
    </div>

    <div class="cta-section">
        <h2 style="font-size: 2.5rem; margin-bottom: 20px;">Thank You for Visiting!</h2>
        <p style="font-size: 1.1rem; color: #999;">Hope to see you soon!</p>
    </div>

    <script>
        // DATA ARRAYS BASED ON YOUR LISTS
        
        const aLevelData = [
            { title: "Preparation of a Standard Solution", desc: "Make a precise solution of sodium carbonate or succinic acid from solid.", badge: "Quantitative" },
            { title: "Acid‚ÄìBase Titration", desc: "Determine the concentration of vinegar or a household acid using a standard solution and phenolphthalein.", badge: "Titration" },
            { title: "Enthalpy Change of Neutralisation", desc: "Measure heat change using a polystyrene cup calorimeter.", badge: "Energetics" },
            { title: "Hess's Law Cycle", desc: "Measure enthalpy changes of related reactions (e.g. anhydrous vs hydrated copper sulfate).", badge: "Energetics" },
            { title: "Iodine Clock Reaction (Quantitative)", desc: "Vary concentrations to determine order of reaction and plot graphs.", badge: "Kinetics" },
            { title: "Reflux Apparatus Setup", desc: "Safe heating of volatile liquids (e.g. ethanol/water demo).", badge: "Technique" },
            { title: "Thin Layer Chromatography (TLC)", desc: "Separation of analgesics or plant pigments on silica plates.", badge: "Analysis" },
            { title: "Qualitative Analysis (Organic)", desc: "Aldehydes vs ketones using Tollens' reagent (silver mirror test).", badge: "Organic" },
            { title: "Electrochemical Cells (Daniell Cell)", desc: "Measure EMF and investigate concentration effects.", badge: "Electrochem" },
            { title: "pH Titration Curves", desc: "Weak acid vs strong base using a pH meter.", badge: "Acids/Bases" },
            { title: "Transition Metal Complexes", desc: "Ligand exchange: ammonia added to copper(II) sulfate.", badge: "Inorganic" }
        ];

        const gcseData = [
            { title: "The \"Disappearing Cross\" (Rates of Reaction)", desc: "Sodium thiosulfate + hydrochloric acid.", badge: "Rates" },
            { title: "Simple Distillation", desc: "Separate water from ink or ethanol from fermentation.", badge: "Separation" },
            { title: "Recrystallisation", desc: "Purify alum (or similar), observe crystal formation.", badge: "Purification" },
            { title: "Qualitative Analysis (Inorganic)", desc: "Test for halide ions using silver nitrate and ammonia.", badge: "Analysis" },
            { title: "Electrolysis of Copper Sulfate Solution", desc: "Using inert (carbon) and active (copper) electrodes to demonstrate oxidation/reduction at electrodes.", badge: "Electrolysis" },
            { title: "Making Salts ‚Äì Insoluble Salt Preparation", desc: "Precipitation reaction (e.g. lead iodide, barium sulfate) via mixing solutions.", badge: "Salts" },
            { title: "Temperature Change in Displacement Reactions", desc: "Magnesium + copper sulfate ‚Äì measure exothermic temperature rise.", badge: "Energy" },
            { title: "Investigating Combustion of Alcohols", desc: "Compare energy released by methanol, ethanol, propanol using calorimetry.", badge: "Organic" },
            { title: "Preparing Copper Sulfate Crystals", desc: "From copper oxide + sulfuric acid, followed by evaporation and crystallisation.", badge: "Salts" },
            { title: "Testing for Gases", desc: "Oxygen (glowing splint), hydrogen (squeaky pop), CO‚ÇÇ (limewater), chlorine (bleaching damp litmus).", badge: "Analysis" },
            { title: "Flame Tests for Metal Ions", desc: "Lithium (red), sodium (yellow), potassium (lilac), copper (green), calcium (orange-red).", badge: "Analysis" },
            { title: "Investigating pH of Common Solutions", desc: "Testing household substances with universal indicator or pH probe.", badge: "Acids/Bases" }
        ];

        const homeData = [
            { title: "Hot Ice Towers", desc: "Supersaturated sodium acetate crystallisation.", badge: "Crystals" },
            { title: "Blue Bottle Reaction", desc: "Reversible oxidation with methylene blue.", badge: "Redox" },
            { title: "Traffic Light Reaction", desc: "Indigo carmine with glucose and alkali.", badge: "Redox" },
            { title: "Chemical Garden", desc: "Metal salts growing structures in sodium silicate.", badge: "Growth" },
            { title: "Copper Plating", desc: "Electroplate a key or coin using copper sulfate.", badge: "Electrolysis" }
        ];

        const beyondData = [
            { title: "Briggs‚ÄìRauscher Oscillating Reaction", desc: "Colour-changing oscillations (clear ‚Üí amber ‚Üí blue).", badge: "Oscillating" },
            { title: "Luminol Chemiluminescence", desc: "Blue light emission (\"CSI\" reaction).", badge: "Light" },
            { title: "Elephant Toothpaste (High-Concentration)", desc: "30% hydrogen peroxide with KI catalyst. ‚ö†Ô∏è Requires strong safety controls.", badge: "Exothermic" },
            { title: "Golden Rain Reaction", desc: "Lead(II) iodide crystallisation. ‚ö†Ô∏è Toxic ‚Äî waste disposal essential.", badge: "Precipitation" },
            { title: "Nylon Rope Trick", desc: "Interfacial polymerisation forming nylon thread.", badge: "Polymers" },
            { title: "Belousov-Zhabotinsky Reaction", desc: "Self-organizing spatial patterns and waves ‚Äì one of the most visually stunning oscillating reactions.", badge: "Complexity" },
            { title: "Thermite Reaction", desc: "Iron oxide + aluminium powder ‚Äì produces molten iron (‚ö†Ô∏è extreme heat, outdoor only, safety critical).", badge: "Redox" },
            { title: "Copper Mirror Test (Fehling's/Benedict's Advanced)", desc: "Form a beautiful copper mirror on glassware using glucose reduction.", badge: "Organic" },
            { title: "Sugar Snake", desc: "Baking soda + sugar produces expanding \"snake\" structure.", badge: "Carbon" },
            { title: "Methanol Cannon / Whoosh Bottle", desc: "Controlled combustion of methanol vapor in a large bottle ‚Äì impressive flame whoosh.", badge: "Combustion" },
            { title: "Barking Dog Reaction", desc: "Nitrous oxide combustion in a tube produces a \"barking\" sound and flame front.", badge: "Exothermic" },
            { title: "Chemiluminescent Glow Sticks (From Scratch)", desc: "Synthesize luminol or use commercial TCPO + dye + hydrogen peroxide.", badge: "Synthesis" },
            { title: "Crystal Growing Competition", desc: "Grow large single crystals of alum, copper sulfate, or Rochelle salt over weeks ‚Äì stunning display pieces.", badge: "Crystals" },
            { title: "Sodium + Water (Controlled)", desc: "Classic alkali metal reaction ‚Äì ‚ö†Ô∏è requires safety screen, outdoors, small piece only.", badge: "Alkali Metals" },
            { title: "Liquid Nitrogen Demonstrations", desc: "Flash-freeze flowers, balloons shrinking/expanding, make ice cream (if you can source LN‚ÇÇ safely).", badge: "Cryogenics" },
            { title: "Polyacrylamide \"Instant Snow\"", desc: "Sodium polyacrylate superabsorbent polymer demonstration.", badge: "Polymers" },
            { title: "Fire-Writing with Potassium Nitrate", desc: "Trace patterns with KNO‚ÇÉ solution on paper, let dry, ignite to create glowing trails.", badge: "Oxidation" }
        ];

        // Generic image URL since specific images weren't provided
        const genericImage = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2_CDnefmwCS6hriJLs3wEHDSB9QMCCWT7bA&s";

        // FUNCTION TO RENDER A LIST INTO A CONTAINER
        function renderGrid(dataList, containerId) {
            const container = document.getElementById(containerId);
            
            dataList.forEach((item, index) => {
                const delay = index * 0.05;
                // Generate a fake href based on title
                const href = item.title.replace(/[^a-zA-Z0-9]/g, '').toLowerCase() + ".html";

                container.innerHTML += `
                <a href="${href}" class="experiment-card fade-in" 
                   data-title="${item.title.toLowerCase()}" 
                   data-badge="${item.badge.toLowerCase()}" 
                   data-desc="${item.desc.toLowerCase()}" 
                   style="transition-delay: ${delay}s">
                    <div class="experiment-img">
                        <img src="${genericImage}" alt="${item.title}">
                    </div>
                    <div class="experiment-content">
                        <div class="experiment-badge">${item.badge}</div>
                        <div class="experiment-title">${item.title}</div>
                        <div class="experiment-description">${item.desc}</div>
                    </div>
                </a>`;
            });
        }

        // RENDER THE FOUR SECTIONS
        renderGrid(aLevelData, 'grid-alevel');
        renderGrid(gcseData, 'grid-gcse');
        renderGrid(homeData, 'grid-home');
        renderGrid(beyondData, 'grid-beyond');


        // SEARCH FUNCTION
        var searchInput = document.getElementById('searchInput');
        
        searchInput.onkeyup = function() {
            var input = searchInput.value.toLowerCase().trim();
            
            // get all the cards from DOM
            var x = document.getElementsByClassName('experiment-card');
            var count = 0;

            if (input == "") {
                // show everything
                for (var j = 0; j < x.length; j++) {
                    x[j].classList.remove("hidden");
                }
                document.getElementById('searchResults').innerHTML = "";
                return;
            }

            // loop and hide/show
            for (var j = 0; j < x.length; j++) {
                var t = x[j].getAttribute('data-title');
                var b = x[j].getAttribute('data-badge');
                var d = x[j].getAttribute('data-desc');

                if (t.includes(input) || b.includes(input) || d.includes(input)) {
                    x[j].classList.remove("hidden");
                    count++;
                } else {
                    x[j].classList.add("hidden");
                }
            }

            // result text
            var txt = "Found " + count + " experiment" + (count !== 1 ? "s" : "");
            document.getElementById('searchResults').innerHTML = txt;
        }

        // SCROLL ANIMATION OBSERVER
        var observer = new IntersectionObserver(function(entries) {
            for(var k=0; k<entries.length; k++) {
                if(entries[k].isIntersecting) {
                    entries[k].target.classList.add('visible');
                }
            }
        }, { threshold: 0.1 });

        // Start observing elements
        // We use a timeout to ensure elements are rendered before observing
        setTimeout(() => {
            var elements = document.querySelectorAll('.fade-in');
            for(var l=0; l<elements.length; l++) {
                observer.observe(elements[l]);
            }
        }, 100);

        // NAVBAR SCROLL EFFECT
        window.onscroll = function() {
            var nav = document.getElementById('navbar');
            if(window.scrollY > 500) {
                nav.classList.remove('dark-mode');
            } else {
                nav.classList.add('dark-mode');
            }
        };

        // Set default mode
        document.getElementById('navbar').classList.add('dark-mode');

        // SMOOTH SCROLL
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // --- EMAIL BUBBLE LOGIC ---
        const emailLink = document.getElementById('emailLink');
        const emailBubble = document.getElementById('emailBubble');

        emailLink.addEventListener('click', function(e) {
            e.stopPropagation(); 
            
            if (emailBubble.style.display === 'block') {
                emailBubble.style.display = 'none';
            } else {
                emailBubble.style.display = 'block';
            }
        });

        // Click anywhere else to close
        document.addEventListener('click', function(e) {
            if (emailBubble.style.display === 'block') {
                emailBubble.style.display = 'none';
            }
        });
        
        // Escape key to close
        document.addEventListener('keydown', function(e) {
            if(e.key === "Escape") {
                emailBubble.style.display = 'none';
            }
        });

    </script>
</body>
</html>
